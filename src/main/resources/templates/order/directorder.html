<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:sec="http://www.w3.org/1999/xhtml"
      layout:decorator="layout/default">
<!-- index.html 고유 CSS 추가 -->
<th:block layout:fragment="css">
</th:block>
<!-- index.html 고유 스크립트 추가 -->
<th:block layout:fragment="script">
</th:block>
<div layout:fragment="content">
    <form method="post" action="/order/buy" enctype="multipart/form-data">
        <div class="container">
            <div class="row">
                <div class="jumbotron col-lg-12 pb-1 pt-5">
                    <h3 sec:authorize="isAuthenticated()" th:text="${#strings.replace('회원 주문하기', ' ', '&nbsp;')}" class="display-4"></h3>
                    <h3 sec:authorize="!isAuthenticated()" th:text="${#strings.replace('비회원 주문하기', ' ', '&nbsp;')}" class="display-4"></h3>
                    <p class="lead">Order & Shipping Information</p>
                    <hr class="my-4">
                </div>
                <h3 class="pr-3 pl-3" th:text="${#strings.replace('상품 리스트', ' ', '&nbsp;')}"></h3>
                <div th:object="${product}" class="col-lg-12">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item pr-0 pl-0 col-lg-12">
                            <span class="col-lg-3"><img src="http://placehold.it/100x100"></span>
                            <span class="col-lg-3 font-weight-bold" th:text="${product.name}"></span>
                            <span class="col-lg-3" id="amount" th:text="|수량 : ${product.amount}개|"></span>
                            <span class="col-lg-3" th:text="|가격 : ${#numbers.formatInteger(product.price,3,'COMMA')}원|"></span>
                            <div class="input-group justify-content-end">
                                <button type="button" th:onclick="'javascript:amountModify(\''+'minus'+'\')'" class="input-group-prepend btn border">
                                    <span><i class="fas fa-minus"></i></span>
                                </button>
                                <input type="hidden" name="id" th:value="${product.id}">
                                <input type="hidden" name="price" th:value="${product.price}">
                                <input type="text" name="amount" th:value="1" class="border text-center" style="width:75px;">
                                <button type="button" th:onclick="'javascript:amountModify(\''+'plus'+'\')'" class="input-group-append btn border">
                                    <span><i class="fas fa-plus"></i></span>
                                </button>
                                <button type="button" class="btn-light p-2 border" th:onclick="'javascript:changeProduct(' + ${product.id} + ')'" th:text="변경"></button>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="d-flex justify-content-end">
                <h4 id="totalPrice" th:text="${totalPrice}? ${#numbers.formatInteger(totalPrice,3,'COMMA')} : '0'"></h4>
            </div>
        </div>
        <hr class="my-4">
        <div class="container">
            <div class="row">
                <div class="col pl-0">
                    <div class="card">
                        <div class="card-header">
                            주문자 정보
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <input id="name" placeholder="이름" class="form-control" type="text" name="userName">
                            </div>
                            <div class="form-group">
                                <input id="email1" class="form-control" type="email" name="email1" th:placeholder="아이디">
                                <input id="email2" class="form-control" type="email" name="email2" th:placeholder="직접입력">
                            </div>
                            <div class="form-group">
                                <input type="number" class="form-control" name="phone">
                            </div>
                            <input
                                    type="hidden"
                                    th:name="${_csrf.parameterName}"
                                    th:value="${_csrf.token}" />

                        </div>
                    </div>
                </div>
                <div class="col pr-0">
                    <div class="card">
                        <div class="card-header">
                            배송지 정보
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <input id="receiverName" placeholder="이름" class="form-control" type="text" name="receiverName">
                            </div>
                            <div class="form-group">
                                <input type="number" placeholder="휴대전화" class="form-control" name="receiverPhone">
                            </div>
                            <div class="form-group d-flex mb-0">
                                <input type="number" placeholder="우편번호" class="form-control w-75" name="zipCode">
                                <button type="button" class="form-control btn-light border w-25" th:text="우편번호"></button>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" name="addr1">
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" name="addr2">
                            </div>
                        </div>
                    </div>
                </div>
                <input type="submit" class="form-control" value="등 록">
            </div>
        </div>
    </form>
</div>